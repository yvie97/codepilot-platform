{
  "version": "1.1",
  "description": "CodePilot benchmark — Java bug-fix tasks used to measure Pass@1. Tasks BENCH-1 through BENCH-4 use a purpose-built micro-library (benchmark/java-bugs) whose bugs and tests are fully verified. Tasks LANG-1 and LANG-2 reference Apache Commons Lang release tags for real-world coverage. NOTE: before running on K8s, push benchmark/java-bugs to GitHub and update the repo_url fields marked with PLACEHOLDER.",
  "notes": [
    "git_ref: release tag (shallow clone) or full 40-char SHA (full clone + checkout).",
    "failing_test: Maven Surefire filter — mvn test -Dtest=<value>.",
    "bug_category: logic_error | off_by_one | null_handling | boundary | concurrency",
    "difficulty: easy | medium | hard",
    "PLACEHOLDER repo_url values must be replaced with a real GitHub URL before running on K8s."
  ],
  "tasks": [
    {
      "id": "BENCH-1",
      "project": "codepilot-benchmark",
      "repo_url": "https://github.com/yvie97/codepilot-benchmark.git",
      "repo_url_local": "file:///Users/ggq/Documents/xjy/cs/project/CodePilot/benchmark/java-bugs",
      "git_ref": "ce4ee228d23ef701b91a2f5b1f123ee133f3d79e",
      "description": "MathUtils.clamp(int, int, int) has its two guard branches swapped. When value < min it returns max, and when value > max it returns min. Fix the method so it correctly clamps value to [min, max].",
      "affected_file": "src/main/java/com/codepilot/bench/MathUtils.java",
      "affected_method": "clamp",
      "failing_test": "MathUtilsTest#testClamp_belowMin",
      "test_command": ["mvn", "-q", "test", "-Dtest=MathUtilsTest#testClamp_belowMin+testClamp_aboveMax"],
      "bug_category": "logic_error",
      "difficulty": "easy"
    },
    {
      "id": "BENCH-2",
      "project": "codepilot-benchmark",
      "repo_url": "https://github.com/yvie97/codepilot-benchmark.git",
      "repo_url_local": "file:///Users/ggq/Documents/xjy/cs/project/CodePilot/benchmark/java-bugs",
      "git_ref": "ce4ee228d23ef701b91a2f5b1f123ee133f3d79e",
      "description": "StringUtils.truncate(String, int) uses maxLen+1 as the substring end index instead of maxLen, returning one extra character when the string is longer than maxLen.",
      "affected_file": "src/main/java/com/codepilot/bench/StringUtils.java",
      "affected_method": "truncate",
      "failing_test": "StringUtilsTest#testTruncate_longerThanMax",
      "test_command": ["mvn", "-q", "test", "-Dtest=StringUtilsTest#testTruncate_longerThanMax"],
      "bug_category": "off_by_one",
      "difficulty": "easy"
    },
    {
      "id": "BENCH-3",
      "project": "codepilot-benchmark",
      "repo_url": "https://github.com/yvie97/codepilot-benchmark.git",
      "repo_url_local": "file:///Users/ggq/Documents/xjy/cs/project/CodePilot/benchmark/java-bugs",
      "git_ref": "ce4ee228d23ef701b91a2f5b1f123ee133f3d79e",
      "description": "StringUtils.rotate(String, int) does not normalise a negative modulo offset before computing the split point. When shift is negative, (shift % len) is negative, so (len - offset) exceeds len and substring() throws StringIndexOutOfBoundsException. Fix: normalise offset with ((offset % len) + len) % len.",
      "affected_file": "src/main/java/com/codepilot/bench/StringUtils.java",
      "affected_method": "rotate",
      "failing_test": "StringUtilsTest#testRotate_negativeShift",
      "test_command": ["mvn", "-q", "test", "-Dtest=StringUtilsTest#testRotate_negativeShift"],
      "bug_category": "boundary",
      "difficulty": "medium"
    },
    {
      "id": "BENCH-4",
      "project": "codepilot-benchmark",
      "repo_url": "https://github.com/yvie97/codepilot-benchmark.git",
      "repo_url_local": "file:///Users/ggq/Documents/xjy/cs/project/CodePilot/benchmark/java-bugs",
      "git_ref": "ce4ee228d23ef701b91a2f5b1f123ee133f3d79e",
      "description": "ArrayUtils.indexOf(int[], int) uses `i <= array.length` as the loop bound instead of `i < array.length`. When the target value is absent the loop reads past the last element and throws ArrayIndexOutOfBoundsException instead of returning -1.",
      "affected_file": "src/main/java/com/codepilot/bench/ArrayUtils.java",
      "affected_method": "indexOf",
      "failing_test": "ArrayUtilsTest#testIndexOf_notFound",
      "test_command": ["mvn", "-q", "test", "-Dtest=ArrayUtilsTest#testIndexOf_notFound+testIndexOf_emptyArray"],
      "bug_category": "boundary",
      "difficulty": "easy"
    },
    {
      "id": "LANG-1",
      "project": "commons-lang",
      "repo_url": "https://github.com/apache/commons-lang.git",
      "git_ref": "rel/commons-lang-3.12.0",
      "description": "StringUtils.rotate(String, int) — explore the implementation and its test coverage, identify any edge-case behaviour the tests do not yet exercise, and either fix a latent defect or harden the implementation against documented-but-untested inputs.",
      "affected_file": "src/main/java/org/apache/commons/lang3/StringUtils.java",
      "affected_method": "rotate",
      "failing_test": "StringUtilsTest#testRotate_StringInt",
      "test_command": ["mvn", "-q", "test", "-Dtest=StringUtilsTest#testRotate_StringInt"],
      "bug_category": "boundary",
      "difficulty": "medium",
      "note": "Exploratory task — the test may pass at this tag; the agent is evaluated on code quality and test coverage improvement."
    },
    {
      "id": "LANG-2",
      "project": "commons-lang",
      "repo_url": "https://github.com/apache/commons-lang.git",
      "git_ref": "rel/commons-lang-3.11",
      "description": "NumberUtils.createNumber(String) throws NumberFormatException instead of returning null when given a trailing-decimal string like '1.1L'. Investigate the implementation and fix it to match the documented null-return contract for unparseable input.",
      "affected_file": "src/main/java/org/apache/commons/lang3/math/NumberUtils.java",
      "affected_method": "createNumber",
      "failing_test": "NumberUtilsTest#testCreateNumber",
      "test_command": ["mvn", "-q", "test", "-Dtest=NumberUtilsTest#testCreateNumber"],
      "bug_category": "null_handling",
      "difficulty": "medium",
      "note": "Exploratory task — verify whether the test fails at this tag before counting it in Pass@1 results."
    }
  ]
}
